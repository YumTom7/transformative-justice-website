<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CaseConnect â€“ Guided Intro</title>
<meta name="robots" content="noindex,nofollow"/>
<style>
  :root{ --bg:#000; --ink:#e7eef8; --blue:#2aa6f2; }
  html,body{ height:100%; margin:0; background:var(--bg); color:var(--ink);
    font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; }
  .screen{ position:fixed; inset:0; display:grid; place-items:center; }

  /* Intro */
  .introWrap{ text-align:center; max-width:1100px; padding:7vh 6vw; }
  .headline{ margin:0 0 8px; font-weight:900; font-size:clamp(36px,6vw,84px); }
  .headline .case{ color:#fff }
  .headline .connect{
    background:linear-gradient(180deg,#2aa6f2 0%,#77c7ff 100%);
    -webkit-background-clip:text; background-clip:text; color:transparent;
  }
  .tagline{ margin:0 0 16px; font-size:clamp(16px,2.1vw,28px); opacity:.9 }

  .controls{ display:flex; gap:12px; justify-content:center; align-items:center; margin-bottom:18px; }
  #voicePicker{
    padding:10px 14px; border-radius:10px; border:1px solid rgba(255,255,255,.25);
    background:#0b0f15; color:#cfe9ff;
  }
  .playBtn{
    appearance:none; border:1px solid rgba(255,255,255,.25);
    border-radius:18px; padding:10px 14px; background:transparent; color:#9ed0ff; cursor:pointer;
  }

  /* Big paragraph (plain text, no highlighting) */
 <script>
/* --- CONFIG --- */
/* Pull the text from your paragraph block */
const TEXT = document.getElementById('script').textContent.trim();

/* Optional: hard-lock a specific voice by name (exact match), e.g.
   "Google US English", "Microsoft Guy Online (Natural) - English (United States)", "Alex" */
const FORCE_VOICE_NAME = "";
/* ------------- */

/* Refs */
const playBtn     = document.getElementById('playVoice');
const beginWrap   = document.getElementById('beginWrap');
const beginBtn    = document.getElementById('begin');
const introScreen = document.getElementById('introScreen');
const qrScreen    = document.getElementById('qrScreen');

/* Show Begin after a moment */
setTimeout(()=>{ beginWrap.style.opacity = 1; }, 900);

/* Voice utils */
function getVoices(){ try { return speechSynthesis.getVoices() || []; } catch { return []; } }

async function waitForVoices(maxMs=2000){
  const t0 = performance.now();
  while (performance.now() - t0 < maxMs){
    const vs = getVoices();
    if (vs.length) return vs;
    await new Promise(r=>setTimeout(r,100));
  }
  return getVoices();
}

/* Prefer en-US male voices, then any English, then any voice */
function preferVoice(vs){
  if (FORCE_VOICE_NAME){
    const exact = vs.find(v => v.name === FORCE_VOICE_NAME);
    if (exact) return exact;
  }
  const enUS = vs.filter(v => /en[-_]?US/i.test(v.lang||""));
  const enUSMale = enUS.find(v => /(Guy|Christopher|Eric|Ryan|David|Alex|Male|US English)/i.test(`${v.name} ${v.voiceURI||""}`));
  if (enUSMale) return enUSMale;
  if (enUS.length) return enUS[0];

  const en = vs.filter(v => /en/i.test(v.lang||""));
  const enMale = en.find(v => /(Guy|Christopher|Eric|Ryan|David|Alex|Male|English)/i.test(`${v.name} ${v.voiceURI||""}`));
  if (enMale) return enMale;
  if (en.length) return en[0];

  return vs[0] || null;
}

/* Play narration (no dropdown, no highlighting) */
async function playNarration(){
  if (!('speechSynthesis' in window)) return;
  const vs = await waitForVoices();
  const voice = preferVoice(vs);

  const u = new SpeechSynthesisUtterance(TEXT);
  if (voice) u.voice = voice;
  u.rate = 0.95;   // gentle pace
  u.pitch = 0.9;   // softer male tone
  u.volume = 1.0;

  try { speechSynthesis.cancel(); speechSynthesis.speak(u); } catch {}
}

/* Wire up buttons */
playBtn.addEventListener('click', playNarration);

beginBtn.addEventListener('click', ()=>{
  try { speechSynthesis.cancel(); } catch {}
  introScreen.style.display = 'none';
  qrScreen.style.display = 'grid';
});
</script>

</body>
</html>
